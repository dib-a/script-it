<!DOCTYPE html>
<head>
    <title>Script it! - My Artix</title>
    <!--meta-->
    <meta charset="utf-8">
    <meta name="keywords" content="Script it!, Linux">
    <meta name="description" content="Linux">
    <meta name="author" content="dib-a">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--css-->
    <link rel="stylesheet" href="../css/master.css">
    <link rel="stylesheet" href="../css/my-artix.css">

    <!--favicon-->
    <link rel="icon" type="image/x-icon" href="../src/images/logo.ico" style="border-radius: 100%;">

    <!--fonts-->
    <script src="https://kit.fontawesome.com/9c4471793c.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="navbar">
        <div class="navbar-left">
            <a href="../index.html"><img src="../src/images/logo.png" alt="Logo"></a>
        </div>
        <div class="navbar-right text-in-a text-hover">
            <a href="../index.html">Home</a>
            <a href="my-artix.html">My Artix</a>
        </div>
    </div>
    <div class="main">
        <div class="table-of-content text-in-a text-hover">
            <a href="">1. Installation</a>
            <a href="">2. Configuration</a>
        </div>
        <div class="installation">
            <h2>1. Installation</h2>
            <div class="text">First you have to format the disk, you can use:</div>
            <div class="code">sudo fdisk /dev/sdX</div>
            <div class="text">Of course, you have to change the X to the path of your Disk</div>
            <div class="text">For this Installation, we will go with this partition:</div>
            <div class="code">
                <ul>
                    <li>/dev/sda1 300MB EFI</li>
                    <li>/dev/sda2 300MB BOOT</li>
                    <li>/dev/sda3 8GB SWAP</li>
                    <li>/dev/sda4 all GB left SYSTEM</li>
                </ul>
            </div>
            <div class="text">Now we can make the file systems and encrypt the SYSTEM partition</div>
            <div class="code">
                mkfs.vfat -F 32 -n EFI /dev/sda1<br>
                mkfs.ext4 -L BOOT /dev/sda2<br>
                mkswap -L SWAP /dev/sda3<br>
                <br>
                cryptsetup -v -y --cipher aes-xts-plain64 --key-size 256 --hash sha256 --iter-time 2000 --use-urandom --verify-passphrase luksFormat /dev/sda4<br>
                cryptsetup open /dev/sda4 SYSTEM<br>
                <br>
                mkfs.ext4 -L SYSTEM /dev/mapper/SYSTEM
            </div>
            <div class="text">Install the base system and kernel</div>
            <div class="code">basestrap /mnt base base-devel openrc elogind-openrc linux linux-firmware</div>
            <div class="text">From here we will dive into the new system</div>
            <div class="code">artix-chroot /mnt</div>
        </div>
        <div class="configuration">
            <h2>2. Configuration</h2>
            <div class="configure-system">
                <h3>2.1 Configure System</h3>
                <div class="text">First, let's download all programs needed</div>
                <div class="code">sudo pamcan -Sy vim dhcpcd wpa_supplicant cryptsetup grub efibootmgr</div>
                <div class="text">Setup the language<br>Here you have to uncomment (remove the # at the beginning of the line) the languages you want to use</div>
                <div class="code">
                    vim /etc/locale.gen<br>
                    locale-gen
                </div>
                <div class="text">Setup the time</div>
                <div class="code">
                    ln -sf /usr/share/zoneinfo/Region/Town /etc/localtime<br>
                    <br>
                    ln -sf /usr/share/zoneinfo/Europe/Berlin /etc/localtime<br>
                    hwclock --systohc --utc
                </div>
                <div class="text">Name the device and set the root password</div>
                <div class="code">echo enterTheName > /etc/hostname<br>passwd</div>
                <div class="text">
                    Add the encrypt hook<br>
                    Search for the Line that stats with HOOKS=()<br>
                    In the line add encrypt bevor the filesystems Hook
                </div>
                <div class="code">vim /etc/mkinitcpio.conf<br> mkinitcpio -P</div>
                <div class="text">
                    setup the grub<br>
                    Search for the Line that starts with GRUB_CMDLINE_LINUX=""<br>
                    and add between the "": cryptdevice=/dev/sda4:SYSTEM root=/dev/mapper/SYSTEM
                </div>
                <div class="code">
                    grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=arch --recheck<br>
                    vim /etc/default/gtrub<br>
                    grub-mkconfig -o /boot/grub/grub.cfg
                </div>
            </div>
            </div>
        </div>
    </div>
</body>
</html>